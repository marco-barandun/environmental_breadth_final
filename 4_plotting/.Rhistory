y_lim_s = 0,
y_lim_n = 10,
x_lim = 1,
zonec = "zone_n",
label_trop = paste("Slope tropical:\n",
allres_eblr_2 %>%
filter(hemisphere == 1) %>%
filter(zone == "tropical") %>%
filter(growthform == "tree") %>%
.$val),
label_notrop = paste("Slope else:\n",
allres_eblr_2 %>%
filter(hemisphere == 1) %>%
filter(zone == "else") %>%
filter(growthform == "tree") %>%
.$val),
label_trop_x = 0.10,
label_trop_y = 9,
label_notrop_x = 0.5,
label_notrop_y = 9)
eb_lr_t_s <- my_plotting(ds %>% filter(!is.na(lat_median_s)),
xc = "e_breadth",
yc = "lat_range_sd_s",
gfc = "growthform",
binc = "bin",
gf_sel = "tree",
ttitle = "Southern hemisphere",
xxlab = 'Environmental breadth',
yylab = 'Latitudinal range',
plot_type = plot.type,
binning = bin.ning,
y_lim_s = 0,
y_lim_n = 10,
x_lim = 1,
zonec = "zone_s",
label_trop = paste("Slope tropical:\n",
allres_eblr_2 %>%
filter(hemisphere == -1) %>%
filter(growthform == "tree") %>%
filter(zone == "tropical") %>%
.$val),
label_notrop = paste("Slope else:\n",
allres_eblr_2 %>%
filter(hemisphere == -1) %>%
filter(growthform == "tree") %>%
filter(zone == "else") %>%
.$val),
label_trop_x = 0.10,
label_trop_y = 9,
label_notrop_x = 0.5,
label_notrop_y = 9)
eb_lr_t_g <- my_plotting_g_2(ds,
xc = "e_breadth",
yc = "lat_range_sd_g",
gfc = "growthform",
binc = "bin",
gf_sel = "tree",
ttitle = "Global",
xxlab = 'Environmental breadth',
yylab = 'Latitudinal range',
plot_type = plot.type,
binning = bin.ning,
y_lim_s = 0,
y_lim_n = 10)
### Herbs
eb_lr_h_n <- my_plotting(ds %>% filter(!is.na(lat_median_n)),
xc = "e_breadth",
yc = "lat_range_sd_n",
gfc = "growthform",
binc = "bin",
gf_sel = "herb",
ttitle = "Northern hemisphere",
xxlab = 'Environmental breadth',
yylab = 'Latitudinal range',
plot_type = plot.type,
binning = bin.ning,
y_lim_s = 0,
y_lim_n = 10,
x_lim = 1,
zonec = "zone_n",
label_trop = paste("Slope tropical:\n",
allres_eblr_2 %>%
filter(hemisphere == 1) %>%
filter(growthform == "herb") %>%
filter(zone == "tropical") %>%
.$val),
label_notrop = paste("Slope else:\n",
allres_eblr_2 %>%
filter(hemisphere == 1) %>%
filter(growthform == "herb") %>%
filter(zone == "else") %>%
.$val),
label_trop_x = 0.10,
label_trop_y = 9,
label_notrop_x = 0.5,
label_notrop_y = 9)
eb_lr_h_s <- my_plotting(ds %>% filter(!is.na(lat_median_s)),
xc = "e_breadth",
yc = "lat_range_sd_s",
gfc = "growthform",
binc = "bin",
gf_sel = "herb",
ttitle = "Southern hemisphere",
xxlab = 'Environmental breadth',
yylab = 'Latitudinal range',
plot_type = plot.type,
binning = bin.ning,
y_lim_s = 0,
y_lim_n = 10,
x_lim = 1,
zonec = "zone_s",
label_trop = paste("Slope tropical:\n",
allres_eblr_2 %>%
filter(hemisphere == -1) %>%
filter(growthform == "herb") %>%
filter(zone == "tropical") %>%
.$val),
label_notrop = paste("Slope else:\n",
allres_eblr_2 %>%
filter(hemisphere == -1) %>%
filter(growthform == "herb") %>%
filter(zone == "else") %>%
.$val),
label_trop_x = 0.10,
label_trop_y = 9,
label_notrop_x = 0.5,
label_notrop_y = 9)
eb_lr_h_g <- my_plotting_g_2(ds,
xc = "e_breadth",
yc = "lat_range_sd_g",
gfc = "growthform",
binc = "bin",
gf_sel = "herb",
ttitle = "Global",
xxlab = 'Environmental breadth',
yylab = 'Latitudinal range',
plot_type = plot.type,
binning = bin.ning,
y_lim_s = 0,
y_lim_n = 10)
p <- cowplot::plot_grid(eb_lr_t_g,
eb_lr_h_g,
eb_lr_t_n,
eb_lr_h_n
eb_lr_t_s,
allres_eblr_2 <- allres_eblr %>% mutate(hemisphere = ifelse(hemisphere == "North", 1, -1))
# tropical = dashed
figure2 <- range(ds = niche_data,
#growthform = "herb",
plot.type = "p_mean",
bin.ning = "eq_points")
range <- function(ds,
#growthform = "tree",
plot.type = "p_mean",
bin.ning = "eq_points") {
### Trees
eb_lr_t_n <- my_plotting(ds %>% filter(!is.na(lat_median_n)),
xc = "e_breadth",
yc = "lat_range_sd_n",
gfc = "growthform",
binc = "bin",
gf_sel = "tree",
ttitle = "Northern hemisphere",
xxlab = 'Environmental breadth',
yylab = 'Latitudinal range',
plot_type = plot.type,
binning = bin.ning,
y_lim_s = 0,
y_lim_n = 10,
x_lim = 1,
zonec = "zone_n",
label_trop = paste("Slope tropical:\n",
allres_eblr_2 %>%
filter(hemisphere == 1) %>%
filter(zone == "tropical") %>%
filter(growthform == "tree") %>%
.$val),
label_notrop = paste("Slope else:\n",
allres_eblr_2 %>%
filter(hemisphere == 1) %>%
filter(zone == "else") %>%
filter(growthform == "tree") %>%
.$val),
label_trop_x = 0.10,
label_trop_y = 9,
label_notrop_x = 0.5,
label_notrop_y = 9)
eb_lr_t_s <- my_plotting(ds %>% filter(!is.na(lat_median_s)),
xc = "e_breadth",
yc = "lat_range_sd_s",
gfc = "growthform",
binc = "bin",
gf_sel = "tree",
ttitle = "Southern hemisphere",
xxlab = 'Environmental breadth',
yylab = 'Latitudinal range',
plot_type = plot.type,
binning = bin.ning,
y_lim_s = 0,
y_lim_n = 10,
x_lim = 1,
zonec = "zone_s",
label_trop = paste("Slope tropical:\n",
allres_eblr_2 %>%
filter(hemisphere == -1) %>%
filter(growthform == "tree") %>%
filter(zone == "tropical") %>%
.$val),
label_notrop = paste("Slope else:\n",
allres_eblr_2 %>%
filter(hemisphere == -1) %>%
filter(growthform == "tree") %>%
filter(zone == "else") %>%
.$val),
label_trop_x = 0.10,
label_trop_y = 9,
label_notrop_x = 0.5,
label_notrop_y = 9)
eb_lr_t_g <- my_plotting_g_2(ds,
xc = "e_breadth",
yc = "lat_range_sd_g",
gfc = "growthform",
binc = "bin",
gf_sel = "tree",
ttitle = "Global",
xxlab = 'Environmental breadth',
yylab = 'Latitudinal range',
plot_type = plot.type,
binning = bin.ning,
y_lim_s = 0,
y_lim_n = 10)
### Herbs
eb_lr_h_n <- my_plotting(ds %>% filter(!is.na(lat_median_n)),
xc = "e_breadth",
yc = "lat_range_sd_n",
gfc = "growthform",
binc = "bin",
gf_sel = "herb",
ttitle = "Northern hemisphere",
xxlab = 'Environmental breadth',
yylab = 'Latitudinal range',
plot_type = plot.type,
binning = bin.ning,
y_lim_s = 0,
y_lim_n = 10,
x_lim = 1,
zonec = "zone_n",
label_trop = paste("Slope tropical:\n",
allres_eblr_2 %>%
filter(hemisphere == 1) %>%
filter(growthform == "herb") %>%
filter(zone == "tropical") %>%
.$val),
label_notrop = paste("Slope else:\n",
allres_eblr_2 %>%
filter(hemisphere == 1) %>%
filter(growthform == "herb") %>%
filter(zone == "else") %>%
.$val),
label_trop_x = 0.10,
label_trop_y = 9,
label_notrop_x = 0.5,
label_notrop_y = 9)
eb_lr_h_s <- my_plotting(ds %>% filter(!is.na(lat_median_s)),
xc = "e_breadth",
yc = "lat_range_sd_s",
gfc = "growthform",
binc = "bin",
gf_sel = "herb",
ttitle = "Southern hemisphere",
xxlab = 'Environmental breadth',
yylab = 'Latitudinal range',
plot_type = plot.type,
binning = bin.ning,
y_lim_s = 0,
y_lim_n = 10,
x_lim = 1,
zonec = "zone_s",
label_trop = paste("Slope tropical:\n",
allres_eblr_2 %>%
filter(hemisphere == -1) %>%
filter(growthform == "herb") %>%
filter(zone == "tropical") %>%
.$val),
label_notrop = paste("Slope else:\n",
allres_eblr_2 %>%
filter(hemisphere == -1) %>%
filter(growthform == "herb") %>%
filter(zone == "else") %>%
.$val),
label_trop_x = 0.10,
label_trop_y = 9,
label_notrop_x = 0.5,
label_notrop_y = 9)
eb_lr_h_g <- my_plotting_g_2(ds,
xc = "e_breadth",
yc = "lat_range_sd_g",
gfc = "growthform",
binc = "bin",
gf_sel = "herb",
ttitle = "Global",
xxlab = 'Environmental breadth',
yylab = 'Latitudinal range',
plot_type = plot.type,
binning = bin.ning,
y_lim_s = 0,
y_lim_n = 10)
p <- cowplot::plot_grid(eb_lr_t_g,
eb_lr_h_g,
eb_lr_t_n,
eb_lr_h_n,
eb_lr_t_s,
eb_lr_h_s,
rel_widths = c(1.3, 1, 1,
1.3, 1, 1),
ncol = 3, byrow = FALSE,
labels = c("A", "C", "E",
"B", "D", "F"),
label_size = 25)
return(p)
}
# tropical = dashed
figure2 <- range(ds = niche_data,
#growthform = "herb",
plot.type = "p_mean",
bin.ning = "eq_points")
figure2
ggsave("./../tmp/figure2_v3.jpg",
width = 4000, height = 2000, units = "px")
ggsave("./../tmp/figure2_v3.jpg",
width = 4000, height = 2000, units = "px")
ggsave("./../tmp/figuree2_v3.jpg",
width = 4000, height = 2000, units = "px")
allres_lmeb_2 <- allres_lmeb %>% mutate(hemisphere = ifelse(hemisphere == "North", 1, -1))
lmebreadth <- function(ds,
#growthform = "tree",
plot.type = "p_mean",
bin.ning = "eq_points") {
### Trees
lm_eb_t_n <- my_plotting(ds %>% filter(!is.na(lat_median_n)),
xc = "lat_median_n",
yc = "e_breadth",
gfc = "growthform",
binc = "bin",
gf_sel = "tree",
ttitle = "Northern hemisphere",
xxlab = 'Latitudinal median',
yylab = 'Environmental breadth',
plot_type = plot.type,
binning = bin.ning,
y_lim_s = 0,
y_lim_n = 1,
x_lim = 70,
zonec = "zone_n",
label_trop = paste("Slope tropical:\n",
allres_lmeb_2 %>%
filter(hemisphere == 1) %>%
filter(growthform == "tree") %>%
filter(zone == "tropical") %>%
.$val),
label_notrop = paste("Slope else:\n",
allres_lmeb_2 %>%
filter(hemisphere == 1) %>%
filter(growthform == "tree") %>%
filter(zone == "else") %>%
.$val),
label_trop_x = 7,
label_trop_y = 0.9,
label_notrop_x = 35,
label_notrop_y = 0.9)
lm_eb_t_s <- my_plotting(ds %>% filter(!is.na(lat_median_s)),
xc = "lat_median_s",
yc = "e_breadth",
gfc = "growthform",
binc = "bin",
gf_sel = "tree",
ttitle = "Southern hemisphere",
xxlab = 'Latitudinal median',
yylab = 'Environmental breadth',
plot_type = plot.type,
binning = bin.ning,
y_lim_s = 0,
y_lim_n = 1,
x_lim = 70,
zonec = "zone_s",
label_trop = paste("Slope tropical:\n",
allres_lmeb_2 %>%
filter(hemisphere == -1) %>%
filter(growthform == "tree") %>%
filter(zone == "tropical") %>%
.$val),
label_notrop = paste("Slope else:\n",
allres_lmeb_2 %>%
filter(hemisphere == -1) %>%
filter(growthform == "tree") %>%
filter(zone == "else") %>%
.$val),
label_trop_x = 7,
label_trop_y = 0.9,
label_notrop_x = 35,
label_notrop_y = 0.9)
lm_eb_t_g <- my_plotting_g(ds,
xc = "lat_median_g",
yc = "e_breadth",
gfc = "growthform",
binc = "bin",
gf_sel = "tree",
ttitle = "Global",
xxlab = 'Latitudinal median',
yylab = 'Environmental breadth',
plot_type = plot.type,
binning = bin.ning,
y_lim_s = 0,
y_lim_n = 1)
### Herbs
lm_eb_h_n <- my_plotting(ds %>% filter(!is.na(lat_median_n)),
xc = "lat_median_n",
yc = "e_breadth",
gfc = "growthform",
binc = "bin",
gf_sel = "herb",
ttitle = "Northern hemisphere",
xxlab = 'Latitudinal median',
yylab = 'Environmental breadth',
plot_type = plot.type,
binning = bin.ning,
y_lim_s = 0,
y_lim_n = 1,
x_lim = 70,
zonec = "zone_n",
label_trop = paste("Slope tropical:\n",
allres_lmeb_2 %>%
filter(hemisphere == 1) %>%
filter(growthform == "herb") %>%
filter(zone == "tropical") %>%
.$val),
label_notrop = paste("Slope else:\n",
allres_lmeb_2 %>%
filter(hemisphere == 1) %>%
filter(growthform == "herb") %>%
filter(zone == "else") %>%
.$val),
label_trop_x = 7,
label_trop_y = 0.9,
label_notrop_x = 35,
label_notrop_y = 0.9)
lm_eb_h_s <- my_plotting(ds %>% filter(!is.na(lat_median_s)),
xc = "lat_median_s",
yc = "e_breadth",
gfc = "growthform",
binc = "bin",
gf_sel = "herb",
ttitle = "Southern hemisphere",
xxlab = 'Latitudinal median',
yylab = 'Environmental breadth',
plot_type = plot.type,
binning = bin.ning,
y_lim_s = 0,
y_lim_n = 1,
x_lim = 70,
zonec = "zone_s",
label_trop = paste("Slope tropical:\n",
allres_lmeb_2 %>%
filter(hemisphere == -1) %>%
filter(growthform == "herb") %>%
filter(zone == "tropical") %>%
.$val),
label_notrop = paste("Slope else:\n",
allres_lmeb_2 %>%
filter(hemisphere == -1) %>%
filter(growthform == "herb") %>%
filter(zone == "else") %>%
.$val),
label_trop_x = 7,
label_trop_y = 0.9,
label_notrop_x = 35,
label_notrop_y = 0.9)
lm_eb_h_g <- my_plotting_g(ds,
xc = "lat_median_g",
yc = "e_breadth",
gfc = "growthform",
binc = "bin",
gf_sel = "herb",
ttitle = "Global",
xxlab = 'Latitudinal median',
yylab = 'Environmental breadth',
plot_type = plot.type,
binning = bin.ning,
y_lim_s = 0,
y_lim_n = 1)
p <- cowplot::plot_grid(lm_eb_t_g,
lm_eb_h_g,
lm_eb_t_n,
lm_eb_h_n,
lm_eb_t_s,
lm_eb_h_s,
rel_widths = c(1.3, 1, 1,
1.3, 1, 1),
ncol = 3, byrow = FALSE,
labels = c("A", "C", "E",
"B", "D", "F"),
label_size = 25)
return(p)
}
# tropical = dashed
figure3 <- lmebreadth(ds = niche_data,
#growthform = "herb",
plot.type = "p_mean",
bin.ning = "eq_points")
figure3
ggsave("./../tmp/figure3_v3.jpg",
width = 4000, height = 2000, units = "px")
